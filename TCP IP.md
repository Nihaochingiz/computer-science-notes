# TCP/IP

### **TCP/IP**

TCP/IP - это названия протоколов, которые лежат в основе интернета
Благодаря им компьютеры обмениваются данными, не мешая друг другу

Оба протокола отвечают за передачу данных, но IP просто отправляет их в сеть, а TCP еще следит за тем, чтобы эти данные попали по нужному адресу

В TCP встроено подтверждение получения, поэтому при хорошей связи данные точно дойдут до получателя.
![[Untitled 5.png]]


TCP/IP - общее стандартное название двух протоколов, TCP и IP. Они стоят рядом потому, что протокол TCP работает поверх IP, а вместе эти протоколы образуют универсальный стек протоколов передачи данных.

TCP - это протокол управления передачей (TRANSMISSION Control Protocol). Его задача - управлять отправкой данных и следить за тем, чтобы они были гарантированно приняты получателем. Именно гарантия получения данных и сделала этот протокол таким востребованным

IP - протокол, который отвечает за адресацию: чтобы нужные данные долетели до нужного компьютера. Его основная задача - логически соединить компьютеры между собой, чтобы можно было отправлять данные от одного к другому. Для этого он выделяет IP-адреса, строит маршруты доставки пакетов, а главное умеет организовать передачу данных с помощью пакетов.

### Пакетная передача данных

Когда один компьютер хочет передать что-то другому, то он не отправляет байт за байтом по очереди. Вместо этого он отправляет данные мелкими порциями,

а получатель собирает из них исходные данные. Этим как раз занимаются протоколы, разбивают все на части и склеивают все заново, потому-что каждый пакет пронумерован

Пакет может быть размером от 1 до 64 килобайт, но в нем всегда есть несколько обязательных  полей - по ним протокол понимает, кому какие данные нужно передать.
![[Untitled 1 1.png]]

![[Untitled 2 1.png]]


# Гарантированная доставка пакетов

Протокол TCP следит за тем, пришли к получателю отправленные данные или нет и нужно ли их отправить заново. Для этого в нём есть механизм подтверждения: после очередной порции данных получатель отправляет сигнал, что данные получены, а отправитель дожидается этого сигнала.

Если сигнала подтверждения нет, то протокол отправляет этот же пакет данных ещё раз — мало ли что. Если подтверждения нет несколько раз подряд, то протокол выдаёт сообщение об ошибке и закрывает соединение.
![[Untitled 3 1.png]]



![[Untitled 4 1.png]]
Но если подтверждать получение каждого пакета, то на это будет уходить очень много времени: при скорости сети в 100 мегабит в секунду реальная скорость передачи данных будет около 50 килобит в секунду. А всё потому, что отправитель не будет передавать новые данные, пока не получит подтверждение по предыдущему пакету. В итоге почти всё время сеть будет занята не передачей данных, а подтверждениями и подтверждениями подтверждений.

Чтобы не было таких задержек, в протоколе предусмотрели кумулятивное и выборочное подтверждение:

- В кумулятивном получатель подтверждает приём последнего пакета и всех предыдущих.
- В выборочном — подтверждает диапазон пакетов, которые он получил. Если какого-то пакета нет в подтверждении, отправитель посылает его заново. Это одна из оптимизаций работы протокола, и в TCP таких оптимизаций много — благодаря им у нас шустрый интернет с быстрыми подтверждениями.

По умолчанию используется кумулятивное подтверждение, например, каждых 100 пакетов: